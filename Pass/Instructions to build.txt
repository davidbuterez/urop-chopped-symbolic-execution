1) CMake files as in https://releases.llvm.org/3.4.2/docs/CMake.html#developing-llvm-pass-out-of-source

  Pass/CMakeLists.txt:
    cmake_minimum_required(VERSION 3.11)
    set (CMAKE_CXX_STANDARD 11)

    find_package(LLVM)

    include(AddLLVM)

    add_definitions(${LLVM_DEFINITIONS})
    include_directories(${LLVM_INCLUDE_DIRS})
    link_directories(${LLVM_BINARY_DIRS})

    add_subdirectory(ShortestPathPass)

    set_target_properties(ShortestPathPass PROPERTIES COMPILE_FLAGS "-D__GLIBCXX_USE_CXX11_ABI=0 -fno-rtti")

  Pass/ShortestPathPass/CMakeLists.txt:
    add_llvm_loadable_module(ShortestPathPass
      ShortestPathPass.cpp
      )

2) In outer directory (Pass), which contains a CMakeLists.txt, run:
  cmake -DCMAKE_C_COMPILER="/bin/gcc-5" -DCMAKE_CXX_COMPILER="/bin/g++-5" CMakeLists.txt

3) In outer directory (Pass):
  make

4) In Pass/src:
  clang-comp -c -g -emit-llvm password.c -o password.bc
  opt -load ../ShortestPathPass/ShortestPathPass.so -shortestPath -disable-output password.bc